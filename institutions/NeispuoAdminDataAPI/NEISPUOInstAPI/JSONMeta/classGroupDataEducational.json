{
  "procedureName": "inst_basic.classGroupCUD",
  "dataName": "if(operationType==1) {form.dataName='classGroupNew'} else {form.dataName='classGroupData'}",
  "sections": [
    {
      "name": "classGroupData",
      "order": 1,
      "subsections": [
        {
          "order": 0,
          "name": "InfoMessages",
          "label": "Важна информация",
          "fields": [
            {
              "type": "info",
              "rendered": true,
              "defaultValue": "<p style='color:MediumSeaGreen;'>Важно!Не забравяйте, че трябва да бъде разделите тази група на подгрупи и да посочите данни за 'Випуск/Възрастова група' за първата подгрупа</p>",
              "order": 0
            }
          ]
        },
        {
          "order": 1,
          "name": "FilterForBasicClass",
          "label": "Данни за клас/група",
          "fields": [
            {
              "label": "Тип на паралелката",
              "name": "classKind",
              "optionsPath": "/data/get/classKinds",
              "type": "select",
              "rendered": false,
              "disabled": true,
              "defaultValue": "classKind",
              "influence": [
                {
                  "type": "hide",
                  "fieldName": "classShiftID",
                  "condition": [
                    2,
                    3
                  ]
                },
                {
                  "type": "render",
                  "fieldName": "classEduDurationID",
                  "condition": [
                    1
                  ]
                },
                {
                  "type": "render",
                  "fieldName": "classGroupID",
                  "condition": [
                    1
                  ]
                },
                {
                  "type": "render",
                  "subsectionName": "SPPOOSpecialities",
                  "condition": [
                    1
                  ]
                },
                {
                  "type": "render",
                  "fieldName": "budgetingClassTypeID",
                  "condition": [
                    1
                  ]
                },
                {
                  "type": "render",
                  "subsectionName": "classAdditionalInformation",
                  "condition": [
                    1
                  ]
                },
                {
                  "fieldName": "basicClassID",
                  "url": "/data/get/basicClassesLimit",
                  "type": "options"
                },
                {
                  "fieldName": "classTypeID",
                  "url": "/data/get/classTypeLimit",
                  "type": "options"
                },
                {
                  "fieldName": "hasClassBook",
                  "type": "render",
                  "condition": [
                    1
                  ]
                }
              ],
              "order": 1,
              "validations": [],
              "info": ""
            },
            {
              "label": "Тип на институцията",
              "name": "instType",
              "type": "select",
              "optionsPath": "/data/get/instTypes",
              "rendered": false,
              "disabled": true,
              "influence": [
                {
                  "fieldName": "classShiftID",
                  "url": "/data/get/classShiftsByInstType",
                  "type": "options"
                },
                {
                  "fieldName": "basicClassID",
                  "url": "/data/get/basicClassesLimit",
                  "type": "options"
                },
                {
                  "fieldName": "classTypeID",
                  "url": "/data/get/classTypeLimit",
                  "type": "options"
                }
              ],
              "order": 2,
              "validations": []
            },
            {
              "label": "Класификация",
              "name": "detailedSchoolTypeID",
              "type": "select",
              "optionsPath": "/data/get/detailedSchoolTypes",
              "rendered": false,
              "disabled": true,
              "influence": [
                {
                  "fieldName": "basicClassID",
                  "url": "/data/get/basicClassesLimit",
                  "type": "options"
                },
                {
                  "fieldName": "classTypeID",
                  "url": "/data/get/classTypeLimit",
                  "type": "options"
                }
              ],
              "order": 3,
              "validations": []
            },
            {
              "label": "Вид финансиране",
              "name": "budgetingSchoolTypeID",
              "type": "select",
              "optionsPath": "/data/get/budgetingSchoolTypes",
              "rendered": false,
              "disabled": true,
              "influence": [
                {
                  "fieldName": "budgetingClassTypeID",
                  "url": "/data/get/budgetingGroupSchoolTypes",
                  "type": "options"
                }
              ],
              "order": 4,
              "validations": []
            },
            {
              "name": "parentClassID",
              "type": "input",
              "inputType": "number",
              "width": 50,
              "rendered": false,
              "disabled": true,
              "order": 5,
              "influence": [
                {
                  "type": "render",
                  "fieldName": "className",
                  "condition": [
                    null
                  ]
                },
                {
                  "type": "render",
                  "fieldName": "institutionDepartmentID",
                  "condition": [
                    null
                  ]
                }
              ],
              "info": ""
            },
            {
              "label": "Наличие на създаден дневник",
              "name": "hasClassBook",
              "type": "input",
              "inputType": "number",
              "width": 50,
              "rendered": false,
              "disabled": true,
              "defaultValue": "hasClassBook",
              "order": 6,
              "influence": [
              ]
            }
          ]
        },
        {
          "name": "classGroups",
          "order": 1,
          "subsections": [
            {
              "order": 1,
              "name": "classBasicData",
              "label": "Основни данни",
              "fields": [
                {
                  "label": "if(instType==2) {field.label='Подгрупа'} else {field.label='Група'}",
                  "name": "classGroupID",
                  "type": "input",
                  "inputType": "number",
                  "width": 50,
                  "rendered": "if(operationType==1) {field.rendered=false} else {field.rendered=true}",
                  "disabled": true,
                  "order": 1,
                  "info": ""
                },
                {
                  "label": "if(instType==1 || instType==4) {field.label='Випуск (клас)'} else {field.label='Възрастова група'}",
                  "name": "basicClassID",
                  "type": "select",
                  "disabled": "if(operationType == 2 && hasClassBook == 1 && (instType == 1 || instType == 2 || instType == 3 || instType == 5)) {field.disabled = true} else {field.disabled = false}",
                  "validations": [
                    {
                      "name": "required",
                      "validator": "",
                      "message": "Полето е задължително"
                    }
                  ],
                  "influence": [
                    {
                      "fieldName": "classTypeID",
                      "url": "/data/get/classTypeLimit",
                      "type": "options"
                    },
                    {
                      "fieldName": "entranceLevelID",
                      "url": "/data/get/entranceLevelLimit",
                      "type": "options"
                    },
                    {
                      "type": "render",
                      "fieldName": "classEduDurationID",
                      "condition": [
                        8,
                        9,
                        10,
                        11,
                        12
                      ]
                    },
                    {
                      "type": "render",
                      "subsectionName": "InfoMessages",
                      "condition": [
                        21
                      ]
                    },
                    {
                      "type": "render",
                      "fieldName": "studentCountPlaces",
                      "condition": [
                        -1,
                        -2,
                        -3,
                        -4,
                        -5,
                        -6,
                        21,
                        32
                      ]
                    },
                    {
                      "type": "render",
                      "fieldName": "classEduFormID",
                      "condition": [
                        1,
                        2,
                        3,
                        4,
                        5,
                        6,
                        7,
                        8,
                        9,
                        10,
                        11,
                        12,
                        13,
                        14,
                        15,
                        19,
                        20,
                        22,
                        23,
                        24,
                        25,
                        26,
                        27,
                        28,
                        29,
                        30,
                        31,
                        40,
                        41,
                        42,
                        43
                      ]
                    },
                    {
                      "type": "render",
                      "fieldName": "classShiftID",
                      "condition": [
                        1,
                        2,
                        3,
                        4,
                        5,
                        6,
                        7,
                        8,
                        9,
                        10,
                        11,
                        12,
                        13,
                        14,
                        15,
                        19,
                        20,
                        22,
                        23,
                        24,
                        25,
                        26,
                        27,
                        28,
                        29,
                        30,
                        31,
                        40,
                        41,
                        42,
                        43
                      ]
                    },
                    {
                      "type": "render",
                      "fieldName": "flStudyTypeID",
                      "condition": [
                        8,
                        9,
                        10,
                        11,
                        12,
                        13,
                        14,
                        15,
                        19,
                        20,
                        22,
                        23,
                        24,
                        25,
                        26,
                        27,
                        28,
                        29,
                        30,
                        31,
                        32,
                        40,
                        41,
                        42,
                        43
                      ]
                    },
                    {
                      "type": "render",
                      "fieldName": "flID",
                      "condition": [
                        8,
                        9,
                        10,
                        11,
                        12,
                        13,
                        14,
                        15,
                        19,
                        20,
                        22,
                        23,
                        24,
                        25,
                        26,
                        27,
                        28,
                        29,
                        30,
                        31,
                        32,
                        40,
                        41,
                        42,
                        43
                      ]
                    },
                    {
                      "type": "render",
                      "fieldName": "entranceLevelID",
                      "condition": [
                        7,
                        8,
                        9,
                        10,
                        11,
                        12,
                        13,
                        14,
                        15
                      ]
                    }
                  ],
                  "order": 2,
                  "info": ""
                },
                {
                  "label": "if(instType==1 || instType==4) {field.label='Вид на паралелката'} else if(instType==2) {field.label='Вид организация'} else {field.label='Организационна форма'}",
                  "name": "classTypeID",
                  "type": "select",
                  "disabled": false,
                  "width": 400,
                  "validations": [
                    {
                      "name": "required",
                      "validator": "",
                      "message": "Полето е задължително"
                    }
                  ],
                  "influence": [
                    {
                      "fieldName": "entranceLevelID",
                      "url": "/data/get/entranceLevelLimit",
                      "type": "options"
                    },
                    {
                      "type": "render",
                      "subsectionName": "SPPOOSpecialities",
                      "condition": [
                        20,
                        90
                      ]
                    },
                    {
                      "type": "render",
                      "sectionName": "profileSubjectsTable",
                      "condition": [
                        11,
                        12,
                        13,
                        14,
                        15,
                        16,
                        21,
                        32,
                        22,
                        23,
                        24,
                        25,
                        26,
                        27,
                        28,
                        29,
                        30,
                        31,
                        33,
                        90
                      ]
                    },
                    {
                      "type": "require",
                      "fields": [
                        "SPPOOEducArea",
                        "SPPOOProfArea",
                        "SPPOOProfession",
                        "SPPOOSpeciality"
                      ],
                      "message": "Полето е задължително",
                      "condition": [
                        20,
                        90
                      ]
                    }
                  ],
                  "order": 3,
                  "info": ""
                },
                {
                  "label": "Наименование",
                  "name": "className",
                  "type": "input",
                  "inputType": "text",
                  "order": 4,
                  "width": 600,
                  "disabled": false,
                  "rendered": "if(operationType==2) {field.rendered=false} else {field.rendered=true}",
                  "validations": [
                    {
                      "name": "required",
                      "validator": "",
                      "message": "Полето е задължително"
                    }
                  ],
                  "influence": []
                },
                {
                  "label": "Брой места в групата",
                  "name": "studentCountPlaces",
                  "type": "input",
                  "inputType": "number",
                  "order": 5,
                  "disabled": false,
                  "rendered": "if(instType==3) {field.rendered=false} else {field.rendered=true}",
                  "width": 100,
                  "validations": [
                    {
                      "name": "maxLength",
                      "validation": 4,
                      "message": "Максимална дължина 4 символа"
                    }
                  ],
                  "influence": []
                },
                {
                  "label": "Организация на учебния ден",
                  "name": "classShiftID",
                  "type": "select",
                  "rendered": "if(instType==1 || instType==4) {field.rendered=true} else {field.rendered=false}",
                  "disabled": false,
                  "width": 600,
                  "order": 6,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "if(instType==1 || instType==4) {field.label='Форма на обучение'} else {field.label='Вид'}",
                  "name": "classEduFormID",
                  "type": "select",
                  "optionsPath": "/data/get/eduForms",
                  "rendered": "if(instType==2) {field.rendered=false} else if(instType==1 && classKind==1) {field.rendered=true} else if(instType==4 && classKind==1) {field.rendered=true} else if(instType==3 && classKind==3) {field.rendered=true} else {field.rendered=false}",
                  "disabled": false,
                  "width": 400,
                  "order": 7,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Срок на обучение",
                  "name": "classEduDurationID",
                  "type": "select",
                  "optionsPath": "/data/get/classEduDurations",
                  "rendered": "if(instType==1) {field.rendered=true} else {field.rendered=false}",
                  "disabled": false,
                  "order": 8,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Финансира се от",
                  "name": "budgetingClassTypeID",
                  "type": "select",
                  "rendered": "if(instType==3) {field.rendered=false} else {field.rendered=true}",
                  "disabled": false,
                  "order": 9,
                  "width": 400,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Адрес на обучение",
                  "name": "institutionDepartmentID",
                  "type": "select",
                  "optionsPath": "/data/get/institutionDepartments",
                  "disabled": false,
                  "rendered": "if(operationType==2) {field.rendered=false} else {field.rendered=true}",
                  "width": 600,
                  "validations": [
                    {
                      "name": "required",
                      "validator": "",
                      "message": "Полето е задължително"
                    }
                  ],
                  "order": 10,
                  "influence": []
                }
              ]
            },
            {
              "order": 2,
              "name": "SPPOOSpecialities",
              "label": "Професия/Специалност, по която се организира обучението",
              "rendered": "if(instType==1 || instType==4) {subsection.rendered=true} else {subsection.rendered=false}",
              "fields": [
                {
                  "label": "Област на образование",
                  "name": "SPPOOEducArea",
                  "type": "searchselect",
                  "optionsPath": "/data/get/SPPOOEducAreas",
                  "disabled": false,
                  "width": 800,
                  "influence": [
                    {
                      "fieldName": "SPPOOProfArea",
                      "url": "/data/get/SPPOOProfAreas",
                      "type": "options"
                    }
                  ],
                  "order": 1,
                  "validations": []
                },
                {
                  "label": "Професионално направление",
                  "name": "SPPOOProfArea",
                  "type": "searchselect",
                  "width": 800,
                  "disabled": false,
                  "influence": [
                    {
                      "fieldName": "SPPOOProfession",
                      "url": "/data/get/SPPOOProfessions",
                      "type": "options"
                    }
                  ],
                  "order": 2,
                  "validations": []
                },
                {
                  "label": "Наименование на професията",
                  "name": "SPPOOProfession",
                  "type": "searchselect",
                  "width": 800,
                  "disabled": false,
                  "influence": [
                    {
                      "fieldName": "SPPOOSpeciality",
                      "url": "/data/get/SPPOOSpecialities",
                      "type": "options"
                    }
                  ],
                  "order": 3,
                  "validations": []
                },
                {
                  "label": "Наименование на специалността",
                  "name": "SPPOOSpeciality",
                  "type": "searchselect",
                  "disabled": false,
                  "width": 800,
                  "order": 4,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Професионално обучение по модули",
                  "name": "isProfModule",
                  "type": "checkbox",
                  "flexible": false,
                  "disabled": false,
                  "order": 4,
                  "influence": [],
                  "validations": []
                }
              ]
            },
            {
              "order": 3,
              "name": "classAdditionalInformation",
              "label": "Допълнителни данни",
              "fields": [
                {
                  "label": "Начин на изучаване на ЧЕ",
                  "name": "flStudyTypeID",
                  "type": "select",
                  "optionsPath": "/data/get/flStudyTypes",
                  "disabled": false,
                  "rendered": "if(instType==1) {field.rendered=true} else {field.rendered=false}",
                  "order": 1,
                  "influence": [
                    {
                      "type": "hide",
                      "fieldName": "flID",
                      "condition": [
                        3
                      ]
                    }
                  ],
                  "validations": []
                },
                {
                  "label": "Чужд език",
                  "name": "flID",
                  "type": "select",
                  "optionsPath": "/data/get/foreignLanguages",
                  "rendered": "if(instType==1) {field.rendered=true} else {field.rendered=false}",
                  "disabled": false,
                  "order": 2,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Прием след",
                  "name": "entranceLevelID",
                  "type": "select",
                  "disabled": false,
                  "rendered": "if(instType==1) {field.rendered=true} else {field.rendered=false}",
                  "order": 3,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Слята/разновъзрастова",
                  "name": "isCombined",
                  "type": "checkbox",
                  "disabled": false,
                  "rendered": "if(instType==1 || instType==4) {field.rendered=true} else {field.rendered=false}",
                  "order": 4,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Специална",
                  "name": "isSpecNeed",
                  "type": "checkbox",
                  "disabled": false,
                  "rendered": "if(instType==1 || instType==2) {field.rendered=true} else {field.rendered=false}",
                  "order": 5,
                  "influence": [],
                  "validations": []
                },
                {
                  "label": "Не се прилага списък",
                  "name": "isNoList",
                  "type": "checkbox",
                  "disabled": false,
                  "rendered": "if(instType==3) {field.rendered=true} else {field.rendered=false}",
                  "order": 6,
                  "influence": [],
                  "validations": []
                }
              ]
            },
            {
              "order": 4,
              "name": "Notes",
              "label": "Бележки",
              "fields": [
                {
                  "name": "notes",
                  "type": "textarea",
                  "order": 4,
                  "width": 800,
                  "height": 5,
                  "validations": [
                    {
                      "name": "maxLength",
                      "validation": 1024,
                      "message": "Максимална дължина 1024 символа"
                    }
                  ],
                  "influence": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "order": 2,
      "name": "profileSubjectsTable",
      "label": "Профилиращи предмети",
      "rendered": "if(instType==1 || instType==2){section.rendered=true} else {section.rendered=false}",
      "accordion": {
        "state": "closed",
        "dataName": "profileSubjects"
      },
      "table": {
        "name": "profileSubjects",
        "searchable": false,
        "hasEditButton": false,
        "fields": [
          {
            "label": "Вид на профилиращия предмет",
            "name": "profSubjType",
            "type": "input",
            "inputType": "text",
            "width": 40,
            "order": 1
          },
          {
            "label": "Профилиращ предмет",
            "name": "profSubjID",
            "type": "input",
            "inputType": "text",
            "width": 40,
            "order": 2
          }
        ]
      }
    }
  ]
}