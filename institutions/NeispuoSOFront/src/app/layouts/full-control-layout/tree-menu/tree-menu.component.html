<div class="search-container">
    <mat-icon>search</mat-icon>
    <input #search class="search-input" placeholder="търсене" type="text" (input)="filterChanged($event.target.value)" [(ngModel)]="filterValue" />
</div>
<div class="l-custom-tree">
    <mat-tree *ngIf="!isLoading" [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree" (scroll)="onScroll($event)">
        <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
            <li>
                <div class="mat-tree-node" [ngClass]="{'last-level': !node.children || node.children.length === 0}">
                    <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name">
                        <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.children">
                            {{ treeControl.isExpanded(node) ? "expand_more" : "chevron_right" }}
                        </mat-icon>
                    </button>
                    <span class="span-name" [ngClass]="{'active': activeNodeId + '' === node.instid + ''}" matTreeNodeToggle (click)="reroute(node)" matTooltip="{{ node.status ? node.status : ''}}">
                        <mat-icon class="status-icon" [style.color]="node.color">stop_circle</mat-icon>
                    {{ node.name }}</span>
                </div>
                <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">
                    <ng-container *ngIf="treeControl.isExpanded(node)" matTreeNodeOutlet></ng-container>
                </ul>
            </li>
        </mat-nested-tree-node>
    </mat-tree>
</div>
<app-loader *ngIf="isLoading"></app-loader>