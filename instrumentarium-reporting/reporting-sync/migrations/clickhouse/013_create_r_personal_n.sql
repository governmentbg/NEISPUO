-- Migration: Create R_Personal_N table
-- Based on inst_basic.R_Personal_N view from the MS SQL server
CREATE TABLE IF NOT EXISTS R_Personal_N (
    FirstName String,
    MiddleName Nullable(String),
    LastName String,
    PermanentAddress Nullable(String),
    PermanentTownName Nullable(String),
    CurrentAddress Nullable(String),
    CurrentTownName Nullable(String),
    PublicEduNumber Nullable(String),
    NationalityName Nullable(String),
    BirthDate Nullable(DateTime64(3, 'UTC')),
    BirthPlaceTownName Nullable(String),
    BirthPlaceCountryName Nullable(String),
    GenderName Nullable(String),
    PersonDetailTitle Nullable(String),
    InstitutionID Int32,
    InstitutionName String,
    InstitutionAbbreviation String,
    RegionName String,
    MunicipalityName String,
    TownName String,
    LocalAreaName Nullable(String),
    TownID Nullable(Int32),
    MunicipalityID Int32,
    RegionID Int32,
    LocalAreaID Nullable(Int32),
    BudgetingSchoolTypeID Int32,
    BaseSchoolTypeName String,
    DetailedSchoolTypeName String,
    FinancialSchoolTypeName String,
    BudgetingInstitutionName String,
    WorkStartYear Nullable(Int32),
    WorkExpTotalYears Nullable(Int32),
    WorkExpSpecYears Nullable(Int32),
    WorkExpTeachYears Nullable(Int32),
    StaffOrd Nullable(Int32),
    StaffPositionNo Nullable(Int32),
    PositionKindName Nullable(String),
    StaffTypeName Nullable(String),
    CategoryStaffTypeName Nullable(String),
    PositionCount Nullable(Float32),
    IsNotMeetReq String,
    ContractWithName Nullable(String),
    NKPDPositionName Nullable(String),
    SubjectGroupName Nullable(String),
    CurrentlyValid String,
    PositionNotes Nullable(String),
    ContractTypeName Nullable(String),
    ContractReasonName Nullable(String),
    ContractNo Nullable(String),
    ContractYear Nullable(Int32),
    ContractNotes Nullable(String),
    IsAccountablePerson String,
    IsTravel String,
    IsExtendStudent String,
    IsPensioneer String,
    IsMentor String,
    IsTrainee String,
    IsHospital String,
    Norma Nullable(Float64),
    NormaT Nullable(Float64),
    ReductionHours Nullable(Float64),
    LectYear Nullable(Float32),
    SchoolYear Nullable(Int16),
    PhoneNumber Nullable(String),
    Email Nullable(String),
    AcquiredPK Nullable(String),
    EducationGradeType Nullable(String),
    SpecialityOKS Nullable(String),
    PKSType Nullable(String),
    QCourseDurationCredits Nullable(Int32)
) ENGINE = MergeTree()
ORDER BY (RegionID, MunicipalityID, InstitutionID);
