<div class="sb-table-container relative">
  <table
    class="sb-table"
    [class.without-header]="hideHeader"
    cdk-table
    matSort
    [class.h-80]="dataSource.pending$ | async"
    [class.opacity-30]="dataSource.loading$ | async"
    [dataSource]="dataSource"
  >
    <ng-content></ng-content>

    <ng-container *ngIf="!hideHeader">
      <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
    </ng-container>
    <tr cdk-row *cdkRowDef="let row; columns: displayedColumns" [class.invisible]="dataSource.loading$ | async"></tr>
    <tr *cdkNoDataRow class="sb-no-data-row">
      <ng-content
        *ngIf="(dataSource.pending$ | async) === 0 && (dataSource.loading$ | async) === false"
        select="[no-data-row]"
      ></ng-content>
    </tr>
  </table>

  <mat-paginator #paginator [length]="dataSource.length$ | async"></mat-paginator>

  <mat-spinner
    *ngIf="dataSource.loading$ | async"
    [diameter]="80"
    class="absolute top-1/2 left-1/2 -mt-10 -ml-10"
  ></mat-spinner>
</div>
