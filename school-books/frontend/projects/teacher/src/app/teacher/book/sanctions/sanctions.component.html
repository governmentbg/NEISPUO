<sb-tab-card [hideHeader]="true">
  <ng-container card-body>
    <a
      *ngIf="canCreate"
      [routerLink]="['./', 'new']"
      mat-raised-button
      color="primary"
      aria-label="Нова санкция"
      class="mb-2.5"
    >
      <fa-icon [icon]="fasPlus" size="lg"></fa-icon>
      <span>Нова санкция</span>
    </a>
    <sb-table
      [dataSource]="dataSource"
      [displayedColumns]="['action', 'fullName', 'sanctionType', 'startDate', 'endDate']"
    >
      <ng-container cdkColumnDef="action">
        <th cdk-header-cell *cdkHeaderCellDef></th>
        <td cdk-cell *cdkCellDef="let row" class="sb-table-action">
          <a [routerLink]="['./', row.sanctionId]" aria-label="Детайли" class="sb-link-btn">
            <fa-icon [icon]="fadChevronCircleRight"></fa-icon>
          </a>
        </td>
      </ng-container>

      <ng-container cdkColumnDef="fullName">
        <th cdk-header-cell *cdkHeaderCellDef>Ученик</th>
        <td cdk-cell *cdkCellDef="let row">
          <a
            *ngIf="!row.isTransferred"
            [routerLink]="['../../../student-info', this.classBookId, row.personId, 'student-book', this.classBookId]"
            class="text-primary"
          >
            {{ row.fullName }}
          </a>
          <span *ngIf="row.isTransferred">
            {{ row.fullName }}
            <span class="sb-badge">ОТПИСАН</span>
          </span>
        </td>
      </ng-container>

      <ng-container cdkColumnDef="sanctionType">
        <th cdk-header-cell *cdkHeaderCellDef>Вид санкция</th>
        <td cdk-cell *cdkCellDef="let row">{{ row.sanctionType }}</td>
      </ng-container>

      <ng-container cdkColumnDef="startDate">
        <th cdk-header-cell *cdkHeaderCellDef>Начална дата</th>
        <td cdk-cell *cdkCellDef="let row">{{ row.startDate | sbDate }}</td>
      </ng-container>

      <ng-container cdkColumnDef="endDate">
        <th cdk-header-cell *cdkHeaderCellDef>Крайна дата</th>
        <td cdk-cell *cdkCellDef="let row">{{ row.endDate | sbDate }}</td>
      </ng-container>
    </sb-table>
  </ng-container>
</sb-tab-card>
