<p-confirmPopup></p-confirmPopup>
<p-table [tableStyle]="{ width: '100%' }" [value]="data" [paginator]="true" [rows]="rows" [loading]="loading">
    <ng-template pTemplate="header">
        <tr>
            <th *ngFor="let col of columns" [pSortableColumn]="col.field !== 'controls' ? col.field : null">
                {{ col.label }}
                <ng-container *ngIf="col.field !== 'controls'">
                    <p-sortIcon [field]="col.field"></p-sortIcon>
                </ng-container>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row>
        <tr>
            <td *ngFor="let col of columns">
                <ng-container *ngIf="col.field === 'controls'; else normalCell">
                    <ng-container
                        *ngTemplateOutlet="
                            controlsTemplate;
                            context: { $implicit: row, confirmAction: confirmAction.bind(this) }
                        "
                    ></ng-container>
                </ng-container>
                <ng-template #normalCell>{{ row[col.field] }}</ng-template>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
            <td [attr.colspan]="columns.length" class="text-center text-muted">{{ noDataText }}</td>
        </tr>
    </ng-template>
</p-table>
